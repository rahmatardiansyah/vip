<!DOCTYPE html>
<html>
  <head>
    <title>Media Pembelajaran Pengolahan Citra Digital</title>
    <style>
      /* Your CSS styles here */
    </style>
  </head>
  <body>
    <input type="file" id="inputFile" />
    <div id="imageContainer"></div>
    <table id="grayscaleTable"></table>

    <script>
      document
        .getElementById('inputFile')
        .addEventListener('change', function (event) {
          const file = event.target.files[0];
          const reader = new FileReader();

          reader.onload = function () {
            const img = new Image();
            img.src = reader.result;

            img.onload = function () {
              const resizedImg = resizeImage(img, 10, 10);
              document.getElementById('imageContainer').appendChild(resizedImg);

              const grayscaleData = rgbToGrayscale(resizedImg);
              displayGrayscaleTable(grayscaleData);
            };
          };

          reader.readAsDataURL(file);
        });

      function resizeImage(image, width, height) {
        const canvas = document.createElement('canvas');
        canvas.width = width;
        canvas.height = height;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(image, 0, 0, width, height);
        const resizedImage = new Image();
        resizedImage.src = canvas.toDataURL('image/png');
        return resizedImage;
      }

      function rgbToGrayscale(image) {
        const canvas = document.createElement('canvas');
        canvas.width = image.width;
        canvas.height = image.height;
        const ctx = canvas.getContext('2d');

        ctx.drawImage(image, 0, 0); // Draw the image on the canvas before getting the data

        const imageData = ctx.getImageData(0, 0, image.width, image.height);
        const data = imageData.data;

        const grayscaleData = [];

        for (let i = 0; i < data.length; i += 4) {
          const r = data[i];
          const g = data[i + 1];
          const b = data[i + 2];
          const grayscale = Math.round((r + g + b) / 3);
          grayscaleData.push(grayscale);
        }

        return grayscaleData;
      }

      function displayGrayscaleTable(data) {
        const table = document.getElementById('grayscaleTable');

        for (let i = 0; i < 10; i++) {
          const row = document.createElement('tr');

          for (let j = 0; j < 10; j++) {
            const cell = document.createElement('td');
            cell.textContent = data[i * 10 + j];
            row.appendChild(cell);
          }

          table.appendChild(row);
        }
      }
    </script>
  </body>
</html>
